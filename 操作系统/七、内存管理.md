## 七、内存管理
* 在单道程序设计中,主存储器（简称主存）被划分成两个部分：
  1. 一部分供操作系统使用(驻留监控程序、内存)
  2. 一部分供当前正在执行的程序使用
  
### 存储管理的主要目的
* 将内存区域进行划分以容纳多个进程(多道程序设计)
* 有效分配利于多道程序

### 7.1内存管理的需求
* 重定位
* 保护
* 共享
* 逻辑组织
* 物理组织<br>
(注:
	>物理地址：(绝对地址)内存的实际地址
	>逻辑地址：与内存无关的地址,一般操作逻辑地址，然后通过 段地址*16+偏移地址 来映射到物理地址
	>相对地址：相对于某一点(通常为起始地址)的逻辑地址
)

#### 7.1.1重定位
 * 程序每次重新换入磁盘时,如果放在和以前相同的内存区域，则是很大的限制。为避免这种情况，
	把再次换入进程时把进程分配到内存的不同区域，称之为重定位
	
#### 7.1.2保护
 * 每个进程都应当受到保护,以免被其他进程有意或者无意的干涉。
 * 由于程序在主存中的位置是不可预测的，因而在编译时候不可能检查绝对地址来确定保护。
	  因此，必须在运行时检查进程产生的所有存储器访问，以确保它们只访问了分配给该进程的存储空间
 * 通常操作内存保护的需求必须由处理器(硬件)来满足,而不是由操作系统(软件)来满足。
	因为操作系统不能预测程序可能产生的所有存储器访问

#### 7.1.3共享
 * 任何保护机制必须具有一定的灵活性，已允许多个进程访问主存的同一部分
 * 合作完成同一任务的进程可能需要访问同一数据结构

#### 7.1.4逻辑组织
 * 计算机系统中的主存总是被组织成线性的(或一维的)地址空间，并且地址空间是由一系列
 字节或字组成
#### 7.1.5物理组织
 * 计算机内存至少被组织成两级，称之为主存和辅存。
 * 主存提供快速的访问，代价也相对较高。主存是易失性的，它不能提供永久存储
 * 辅存比主存慢且便宜，它通常是非易失性的，大容量的辅存可以长期存储程序和数据
   ，而较小的主存用于保存当前使用的程序和数据
   
### 7.2内存分区
 * 现代多道程序设计系统中，涉及一种成为虚拟内存的方案
 * 虚拟内存基于分段和分页两种技术或者只涉及其中的一种
 
#### 7.2.1固定分区
##### 分区大小 
 * 固定分区有两种选择:大小相等的分区和大小不相等的分区
 * 大小相等
		    在分区大小相等中：小于或等于分区大小(例如：每个分区大小为8M)的任何进程都可以
		转入到任何可用的分区中。如果所有的分区都满了，并且没有进程处于就绪态或者运行态，
		则操作系统可以换出一个进程的所有分区，并转入另一个进程，使得处理器有事可做
		
		使用大小相等的固定分区有两个难点：
		* 程序可能太大不能放到一个分区中。这时程序员必须使用覆盖技术设计程序，使得在任何
		  时候该程序只有一部分需要放到主存中。当需要模块不在时，用户程序必须必须把这个模
		  块转入到程序的分区中，覆盖掉该分区中的任何程序和数据
		* 主存的利用率非常第。任何程序，及时很小，都需要占据一个完整的分区
   
	
 